.markdown {
  max-width: min(100%, 64rem);
  margin: 0;
  padding: clamp(1rem, 3vw, 2rem) clamp(0.5rem, 2vw, 1.5rem);
  max-height: calc(100vh - 12rem);
  overflow: auto;
  color: var(--mui-palette-text-primary, #f8fafc);
  background: transparent;
  border: none;
  scrollbar-width: thin;
  scrollbar-color: rgba(148, 163, 184, 0.28) transparent;
  pointer-events: auto;
}

.markdown:focus-visible {
  outline: 2px solid rgba(96, 165, 250, 0.55);
  outline-offset: 4px;
}

.markdown::-webkit-scrollbar {
  width: 0.55rem;
}

.markdown::-webkit-scrollbar-thumb {
  background: rgba(148, 163, 184, 0.28);
  border-radius: 999px;
}

.markdown :global(p) {
  margin: 0 0 1rem;
  line-height: 1.7;
}

.markdown :global(h1),
.markdown :global(h2),
.markdown :global(h3),
.markdown :global(h4),
.markdown :global(h5),
.markdown :global(h6) {
  margin: 2rem 0 1rem;
  line-height: 1.3;
  font-weight: 600;
}

.markdown :global(h1) {
  font-size: clamp(1.5rem, 3vw, 2.25rem);
}

.markdown :global(h2) {
  font-size: clamp(1.35rem, 2.6vw, 2rem);
}

.markdown :global(h3) {
  font-size: clamp(1.2rem, 2.2vw, 1.75rem);
}

.markdown :global(ul),
.markdown :global(ol) {
  margin: 0 0 1.25rem 1.25rem;
  display: grid;
  gap: 0.5rem;
}

.markdown :global(li) {
  line-height: 1.6;
}

.markdown :global(code) {
  font-family: var(--font-mono, "Fira Code", "SFMono-Regular", Menlo, Consolas, monospace);
  font-size: 0.9rem;
  background: rgba(30, 41, 59, 0.6);
  border-radius: 6px;
  padding: 0.1rem 0.4rem;
  border: 1px solid rgba(100, 116, 139, 0.35);
}

.markdown :global(pre) {
  margin: 0 0 1.5rem;
  background: rgba(30, 41, 59, 0.8);
  border-radius: 12px;
  padding: 1rem 1.25rem;
  overflow: auto;
  border: 1px solid rgba(100, 116, 139, 0.35);
}

.markdown :global(table) {
  width: 100%;
  margin: 0 0 1.5rem;
  border-collapse: collapse;
  border-radius: 14px;
  overflow: hidden;
  background: rgba(15, 23, 42, 0.92);
  border: 1px solid rgba(148, 163, 184, 0.25);
}

.markdown :global(th),
.markdown :global(td) {
  padding: 0.75rem 1rem;
  border-bottom: 1px solid rgba(148, 163, 184, 0.18);
  text-align: left;
  font-size: 0.95rem;
}

.markdown :global(blockquote) {
  margin: 0 0 1.5rem;
  padding: 0.5rem 1rem;
  border-left: 3px solid rgba(96, 165, 250, 0.45);
  background: rgba(96, 165, 250, 0.12);
  border-radius: 0 12px 12px 0;
}

.markdown :global(a) {
  color: var(--mui-palette-primary-light, #93c5fd);
  text-decoration: underline;
  text-decoration-color: rgba(147, 197, 253, 0.45);
}

.markdown :global(img) {
  max-width: 100%;
  border-radius: 12px;
}

.markdown :global(.vc-katex-wrapper) {
  display: inline-flex;
  flex-direction: column;
  align-items: flex-start;
  gap: 0.4rem;
  max-width: 100%;
}

.markdown :global(.vc-katex-rendered) {
  display: block;
}

.markdown :global(.vc-katex-fallback) {
  font-size: 0.85rem;
  color: var(--mui-palette-text-secondary, rgba(226, 232, 240, 0.65));
  background: rgba(30, 41, 59, 0.6);
  border-radius: 6px;
  padding: 0.4rem 0.6rem;
  border: 1px dashed rgba(148, 163, 184, 0.35);
}

@media (max-width: 768px) {
  .markdown {
    padding: clamp(0.75rem, 4vw, 1.5rem);
    max-height: calc(100vh - 10rem);
  }
}
