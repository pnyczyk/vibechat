# Tasks: realtime-agent-instructions

[This file is generated by /prompts:sdd-tasks and tracks implementation progress]

## Task T001: Create Configurable Instruction Source
**Status:** Completed
**Dependencies:** None
**Files:**
- `config/instructions.md`
- `app/lib/realtime-instructions.ts`
- `AGENTS.md`
- `README.md`

### Description
Add a markdown file under `config/` for the assistant prompt, expose a small server-side loader
with caching + invalidation helpers, and document where contributors should edit the prompt.

### Acceptance Criteria
- Loader trims whitespace, caches by `mtime`, and throws when the file is missing or empty.
- Markdown file preserves the existing guidance plus formatting for future edits.
- Documentation references the new location and workflow for updating instructions.

### Implementation Notes
- Use `node:fs/promises` to avoid bundling issues and keep the helper tree-shakable.

---

## Task T002: Inject Instructions During Token Issuance
**Status:** Completed
**Dependencies:** T001
**Files:**
- `app/api/realtime-token/route.ts`
- `app/chat-client.tsx`
- `tests/lib/realtime-instructions.test.ts`

### Description
Update the realtime token API route to read the config-driven instructions, include them in the
`session.instructions` payload sent to OpenAI, and stop embedding the prompt in the client.
Add Jest coverage for the loader behavior and ensure the UI surfaces route failures.

### Acceptance Criteria
- `/api/realtime-token` fails fast with a descriptive error if instructions cannot be loaded.
- `ChatClient` no longer hardcodes instructions; it instantiates `RealtimeAgent` with only the
  name + tools.
- Jest tests cover cache hits, cache invalidation, and empty-file errors for the loader.

### Implementation Notes
- Propagate error messages back to the client so QA notices configuration issues quickly.

---
